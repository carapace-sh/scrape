# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: but
description: A GitButler CLI tool
flags:
  -C, --current-dir=: Run as if gitbutler-cli was started in PATH instead of the current working directory
  -h, --help: Print help
  -j, --json: Whether to use JSON output format
completion:
  flag:
    current-dir:
    - $files
commands:
- name: log
  description: Show commits on active branches in your workspace
  flags:
    -h, --help: Print help
- name: status
  aliases:
  - st
  description: Overview of the uncommitted changes in the repository
  flags:
    -f: Determines whether the committed files should be shown as well
    --files&: Determines whether the committed files should be shown as well
    -h, --help: Print help
    -r, --review: Show the forge review information
    -v, --verbose: Show verbose output with commit author and timestamp
- name: rub
  description: Combines two entities together to perform an operation
  flags:
    -h, --help: Print help (see more with '--help')
- name: init
  description: Initializes a GitButler project from a git repository in the current directory
  flags:
    -h, --help: Print help
    -r, --repo: Also initializes a git repository in the current directory if one does not exist
- name: base
  description: Commands for managing the base
  flags:
    -h, --help: Print help
  commands:
  - name: check
    description: Fetches remotes from the remote and checks the mergeability of the branches in the workspace
    flags:
      -h, --help: Print help
  - name: update
    description: Updates the workspace (with all applied branches) to include the latest changes from the base branch
    flags:
      -h, --help: Print help
  - name: help
    description: Print this message or the help of the given subcommand(s)
    commands:
    - name: check
      description: Fetches remotes from the remote and checks the mergeability of the branches in the workspace
    - name: update
      description: Updates the workspace (with all applied branches) to include the latest changes from the base branch
    - name: help
      description: Print this message or the help of the given subcommand(s)
- name: branch
  description: Commands for managing branches
  flags:
    -h, --help: Print help
  commands:
  - name: new
    description: Creates a new branch in the workspace
    flags:
      -a, --anchor=: Anchor point - either a commit ID or branch name to create the new branch from
      -h, --help: Print help
  - name: delete
    description: Deletes a branch from the workspace
    flags:
      -f, --force: Force deletion without confirmation
      -h, --help: Print help
  - name: list
    description: List the branches in the repository
    flags:
      -h, --help: Print help
      -l, --local: Show only local branches
  - name: unapply
    description: Unapply a branch from the workspace
    flags:
      -f, --force: Force unapply without confirmation
      -h, --help: Print help
  - name: help
    description: Print this message or the help of the given subcommand(s)
    commands:
    - name: new
      description: Creates a new branch in the workspace
    - name: delete
      description: Deletes a branch from the workspace
    - name: list
      description: List the branches in the repository
    - name: unapply
      description: Unapply a branch from the workspace
    - name: help
      description: Print this message or the help of the given subcommand(s)
- name: mark
  description: Creates or removes a rule for auto-assigning or auto-comitting
  flags:
    -d, --delete: Deletes a mark
    -h, --help: Print help
- name: unmark
  description: Removes all marks from the workspace
  flags:
    -h, --help: Print help
- name: commit
  description: Commit changes to a stack
  flags:
    -c, --create: Whether to create a new branch for this commit. If the branch name given matches an existing branch, that branch will be used instead. If no branch name is given, a new branch with a generated name will be created
    -h, --help: Print help
    -m, --message=: Commit message
    -o, --only: Only commit assigned files, not unassigned files
- name: push
  description: Push a branch/stack to remote
  flags:
    -h, --help: Print help
    -r, --run-hooks: Run pre-push hooks
    -s, --skip-force-push-protection: Skip force push protection checks
    -f, --with-force: Force push even if it's not fast-forward
- name: new
  description: Insert a blank commit before the specified commit, or at the top of a stack
  flags:
    -h, --help: Print help
- name: describe
  aliases:
  - desc
  description: Edit the commit message of the specified commit
  flags:
    -h, --help: Print help
- name: oplog
  description: Show operation history (last 20 entries)
  flags:
    -h, --help: Print help
    --since=: Start from this oplog SHA instead of the head
- name: restore
  description: Restore to a specific oplog snapshot
  flags:
    -f, --force: Skip confirmation prompt
    -h, --help: Print help
- name: undo
  description: Undo the last operation by reverting to the previous snapshot
  flags:
    -h, --help: Print help
- name: snapshot
  description: Create an on-demand snapshot with optional message
  flags:
    -h, --help: Print help
    -m, --message=: Message to include with the snapshot
- name: mcp
  description: Starts up the MCP server
  flags:
    -h, --help: Print help
- name: forge
  description: Commands for interacting with forges like GitHub, GitLab (coming soon), etc
  flags:
    -h, --help: Print help
  commands:
  - name: auth
    description: Authenticat with your forge provider (at the moment, only GitHub is supported)
    flags:
      -h, --help: Print help
  - name: list-users
    description: List authenticated forge accounts known to GitButler
    flags:
      -h, --help: Print help
  - name: forget
    description: Forget a previously authenticated forge account
    flags:
      -h, --help: Print help
  - name: help
    description: Print this message or the help of the given subcommand(s)
    commands:
    - name: auth
      description: Authenticat with your forge provider (at the moment, only GitHub is supported)
    - name: list-users
      description: List authenticated forge accounts known to GitButler
    - name: forget
      description: Forget a previously authenticated forge account
    - name: help
      description: Print this message or the help of the given subcommand(s)
- name: completions
  description: Generate shell completion scripts for the specified or inferred shell
  flags:
    -h, --help: Print help
- name: help
  description: Print this message or the help of the given subcommand(s)
  commands:
  - name: log
    description: Show commits on active branches in your workspace
  - name: status
    description: Overview of the uncommitted changes in the repository
  - name: rub
    description: Combines two entities together to perform an operation
  - name: init
    description: Initializes a GitButler project from a git repository in the current directory
  - name: base
    description: Commands for managing the base
    commands:
    - name: check
      description: Fetches remotes from the remote and checks the mergeability of the branches in the workspace
    - name: update
      description: Updates the workspace (with all applied branches) to include the latest changes from the base branch
  - name: branch
    description: Commands for managing branches
    commands:
    - name: new
      description: Creates a new branch in the workspace
    - name: delete
      description: Deletes a branch from the workspace
    - name: list
      description: List the branches in the repository
    - name: unapply
      description: Unapply a branch from the workspace
  - name: mark
    description: Creates or removes a rule for auto-assigning or auto-comitting
  - name: unmark
    description: Removes all marks from the workspace
  - name: commit
    description: Commit changes to a stack
  - name: push
    description: Push a branch/stack to remote
  - name: new
    description: Insert a blank commit before the specified commit, or at the top of a stack
  - name: describe
    description: Edit the commit message of the specified commit
  - name: oplog
    description: Show operation history (last 20 entries)
  - name: restore
    description: Restore to a specific oplog snapshot
  - name: undo
    description: Undo the last operation by reverting to the previous snapshot
  - name: snapshot
    description: Create an on-demand snapshot with optional message
  - name: mcp
    description: Starts up the MCP server
  - name: forge
    description: Commands for interacting with forges like GitHub, GitLab (coming soon), etc
    commands:
    - name: auth
      description: Authenticat with your forge provider (at the moment, only GitHub is supported)
    - name: list-users
      description: List authenticated forge accounts known to GitButler
    - name: forget
      description: Forget a previously authenticated forge account
  - name: completions
    description: Generate shell completion scripts for the specified or inferred shell
  - name: help
    description: Print this message or the help of the given subcommand(s)
